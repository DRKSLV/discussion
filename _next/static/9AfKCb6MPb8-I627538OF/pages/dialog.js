(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/sRa":function(t){t.exports=JSON.parse('{"options":[{"condition":true,"question":"Who are you?","answer":"I am the Weatherman. "},{"condition":true,"question":"Where are we?","answer":"I don\'t know."},{"condition":true,"question":"How\'s the weather??","answer":["Hmpf.","It\'s storming outside. STORMING! The audacity!","damn, i HATE my job."]},{"condition":true,"question":"TEST","answer":{"text":"YES TEST WORKING IDIOT","effect":"yitter","stayInOptions":false,"options":[{"condition":true,"question":"NICE","answer":["IKR!!",{"text":"We could be friends!","options":[{"question":"ACCEPT","answer":"YeSS! We\'re besties !!! :)"},{"question":"DECLINE","answer":"just joking"}]}]},{"condition":true,"question":"WOW FUCK YOU","answer":"bruh fuck urself >:("}]}},{"condition":true,"question":"How are you??","answer":[]}]}')},"80PL":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("q1tI"),o=n.n(r),a=n("8Kt/"),i=n.n(a),u=n("NIcq"),s=n("q9vl"),c=n("40RG"),l=n("SKjy"),p=n("e6a3"),f=n("PmZg"),d=n("Srb5"),b=n("jxK0"),m=n("FCqg"),g=n("ma3e"),O=n("ecW4"),v=o.a.createElement;function h(t){return v(b.d,null,v(i.a,null,v("title",null,"Civil Discussion")),v(s.a,null,v(d.a,{style:{backgroundColor:"#181a1b",height:"100vh",width:"100vw"}},v(m.a,{title:t.title,rerenderFunc:function(){}},v(m.b,{icon:v(g.m,null),drawer:v(O.a,null)}),v(m.b,{icon:v(g.p,null)},v(l.a,null,v(l.b,{text:"Profile"}),v(l.b,{leftIcon:v(u.d,null),text:"Switch Acount"},v(c.b,null)),v(p.a,null),v(l.b,{leftIcon:v(u.c,null),text:"Account Settings"}))),v(m.b,{icon:v(u.c,null)},v(l.a,null,v(l.b,{text:"Dark Theme"}),v(l.b,{text:"Privacy Policy",link:"/discussion/privacy"})))),v(f.a,null,t.children))))}},O1IP:function(t,e,n){t.exports={form:"postForm_form__Oczvn",postForm:"postForm_postForm__eQJ-A",registerForm:"postForm_registerForm__1bmo3",baseButton:"postForm_baseButton__3FQfE",accountFormWrap:"postForm_accountFormWrap__138CC",usernameHighlight:"postForm_usernameHighlight__OITtg",removeButton:"postForm_removeButton__5_hKK",clicked:"postForm_clicked__2ebhs",accountFormsAlign:"postForm_accountFormsAlign__2EQp5",tabWrapper:"postForm_tabWrapper__2wp4y",tabBar:"postForm_tabBar__2RJae",tab:"postForm_tab__1A3gY",submitButton:"postForm_submitButton__WO9kK",postButton:"postForm_postButton__1GP0x",destructiveButton:"postForm_destructiveButton__10KJ-",jumping:"postForm_jumping__3WKtO",rotating:"postForm_rotating__1YuS7",title:"postForm_title__3evoo",titleCounter:"postForm_titleCounter__QnXSx",author:"postForm_author__31Fn5"}},Srb5:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return p}));var r=n("q1tI"),o=n.n(r),a=n("SKjy"),i=n("hKBk"),u=n.n(i),s=n("B68i"),c=o.a.createElement,l=Object(r.createContext)({});function p(t){var e=Object(r.useState)(!1),n=e[0],i=e[1],p=Object(r.useState)([0,0]),f=p[0],d=p[1],b=Object(r.useState)([c(a.b,{text:"Dark Theme"}),c("hr",null),c(a.b,{text:"Privacy Policy"})]),m=b[0],g=b[1];if(n)var O={left:"min( calc( 100vw - 205px ),   "+f[0]+"px  )",top:"min( calc( 100vh + "+document.body.scrollHeight+"px - 205px ),   "+f[1]+"px  )",display:n?"block":"none"};function v(){i(!1)}var h=m.map((function(t,e){return o.a.cloneElement(t,{key:e})}));return c("div",{style:t.style},c(l.Provider,{value:{openMenu:function(t,e,n){n&&(i(!0),d([t,e]),g(n))},removeMenu:v}},t.children),c(s.a,{className:u.a.menuMover,component:"div",onClickOutside:function(){v()},style:O},n&&c(a.a,{small:!0},h)))}},YUBe:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dialog",function(){return n("lBlV")}])},e6a3:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("o0o1"),o=n.n(r),a=n("rePB"),i=n("ODXe"),u=n("q1tI"),s=n.n(u),c=n("SKjy"),l=n("ma3e"),p=n("q9vl"),f=n("v0uu"),d=s.a.createElement;function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(){var t=Object(p.b)(),e=Object(i.a)(t,2),n=e[0],r=e[1],a=Object(u.useState)({}),b=a[0],g=a[1],v=n.users[n.active],h=Object(u.useState)(!1);h[0],h[1];Object(u.useEffect)((function(){g(JSON.parse(localStorage.getItem("notifications")||"{}"))}),[]);var _=!!v&&!!b[v.username],y=_?"ON":"OFF";return v||(y="PLS LOG IN"),"undefined"!==typeof Notification&&"denied"===Notification.permission&&(_=!1,y="DENIED"),("undefined"===typeof navigator||!1 in navigator)&&(_=!1,y="UNSUPPORTED"),d(c.b,{onClick:function(){var t,e,a,i,u,s,c;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=n.users[n.active],!(!1 in navigator)&&t){l.next=3;break}return l.abrupt("return");case 3:return e=b[t.username],l.next=6,o.a.awrap(navigator.serviceWorker.ready);case 6:return a=l.sent,l.next=9,o.a.awrap(a.pushManager.getSubscription());case 9:if(i=l.sent){l.next=26;break}return l.next=13,o.a.awrap(fetch(f.a+"/notifier/pushSubscriptionKey"));case 13:return u=l.sent,l.next=16,o.a.awrap(u.json());case 16:return s=l.sent,c=O(s.public),l.prev=18,l.next=21,o.a.awrap(a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c}));case 21:i=l.sent,l.next=26;break;case 24:l.prev=24,l.t0=l.catch(18);case 26:return l.prev=26,l.next=29,o.a.awrap(r.post("/notifier/".concat(e?"un":"","subscribe"),m({},i.toJSON()),{params:{usersub:!0}}));case 29:g((function(n){var r=m({},n);return r[t.username]=!e,localStorage.setItem("notifications",JSON.stringify(r)),r})),l.next=34;break;case 32:l.prev=32,l.t1=l.catch(26);case 34:case"end":return l.stop()}}),null,null,[[18,24],[26,32]],Promise)},leftIcon:d(l.c,null),text:d(s.a.Fragment,null,"Notifications: ",d("span",{style:{color:_?"lime":"red"}},y))})}function O(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}},ecW4:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("o0o1"),o=n.n(r),a=n("ODXe"),i=n("q1tI"),u=n.n(i),s=n("q9vl"),c=n("O1IP"),l=n.n(c),p=u.a.createElement;function f(t){var e=Object(s.b)(),n=Object(a.a)(e,2),r=n[0],c=n[1],f=r.users[r.active],b=Object(i.useState)(t.title||""),m=b[0],g=b[1],O=Object(i.useState)(t.text||""),v=O[0],h=O[1],_=Object(i.useState)(!1),y=_[0],w=_[1],x=Object(i.useState)(!1),j=x[0],S=x[1],F=Object(i.useState)(!1),k=F[0],P=F[1],E=Object(i.useRef)();function I(t){switch(t.target.name){case"title":return g(t.target.value);case"text":return P(E.current.scrollHeight),h(t.target.value)}}return console.log(y),Object(i.useEffect)((function(){E&&E.current&&P(E.current.scrollHeight)}),[E]),p(u.a.Fragment,null,p("form",{onSubmit:function(e){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),w(!0),n.next=4,o.a.awrap(d(1e3));case 4:if(console.log("Title:",m),console.log("Text:",v),!t.edit){n.next=13;break}return n.next=9,o.a.awrap(t.onEdit(v));case 9:return n.sent||S(!0),w(!1),n.abrupt("return");case 13:m.length>=1&&m.length<=150?c.post("/post/",{title:m,text:v}).then((function(e){t.close(),t.rerender(e.data.entityId),w(!1)})).catch((function(e){console.log(e),t.rerender(),w(!1)})):(w(!1),t.rerender(),t.close());case 14:case"end":return n.stop()}}),null,null,null,Promise)},className:l.a.postForm},p("div",{className:l.a.titleCounter,"data-invalid":m.length<1||m.length>150},p("input",{type:"text",className:l.a.title,value:m,onChange:I,name:"title",placeholder:"The post's title",autoComplete:"off",disabled:y||t.edit}),p("p",null,m.length,"/150")),p("textarea",{name:"text",value:v,onChange:I,placeholder:"Go ahead, unleash your creative Genius!",rows:"4",autoComplete:"off",disabled:y,ref:E,style:{height:k+3+"px"}}),p("div",{className:l.a.postButton},p("button",{type:"submit",value:"Post!","data-known":!Boolean(f),disabled:y},"Post!")),t.edit&&p("button",{value:"Cancel",disabled:y,onClick:function(){t.onEdit(null,!0)}},"Cancel"),p("div",{className:l.a.author},"as",p("span",{"data-known":Boolean(f)},f?f.username:"<UNKNOWN>"),j&&p("i",{style:{color:"red",marginLeft:"2em"}},"(an error occured)"))))}function d(t){return new Promise((function(e){setTimeout(e,t)}))}},lBlV:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n("q1tI"),o=n.n(r),a=n("80PL"),i=n("/sRa"),u=n("zsrE"),s=n.n(u),c=o.a.createElement;function l(){return console.log(i),c(a.a,{title:"Dialog test"},c(p,{dialog:i}))}function p(t){var e=t.dialog,n=Object(r.useState)(-1),o=n[0],a=n[1],i=Object(r.useState)(0),u=i[0],l=i[1],p=Object(r.useRef)();function b(t){console.log("key down"),p.current&&!0!==p.current.keyDwn()||l((function(t){return-1===o?t:t+1}))}function m(t){a(t),l(0)}return c("div",{className:s.a.dialogBox,onKeyDown:b,onClick:b,tabIndex:"0"},-1===o?c(d,{dia:e,setOpt:m}):"",-1!==o?c(f,{line:e.options[o].answer,idx:u,setOpt:m,ref:p}):"")}var f=Object(r.forwardRef)((function(t,e){var n=t.line,a=void 0===n?"...":n,i=t.idx,u=t.setOpt,s=null,l=Object(r.useState)(-1),p=l[0],b=l[1],m=Object(r.useState)(0),g=m[0],O=m[1],v=Object(r.useRef)();function h(t){b(t),O(0)}Array.isArray(a)?(a.length<1&&(a=["..."]),s=a[Math.min(i,a.length-1)]):s=a,Object(r.useImperativeHandle)(e,(function(){return{keyDwn:function(){if(!v.current||!0===v.current.keyDwn()){if(s.options){if(!s.stayInOptions&&-1!==p){var t=s.options[p].answer;if(g>=(Array.isArray(t)?t.length-1:0))return!0}return O((function(t){return-1===p?t:t+1})),!1}return!0}}}}),[s,p,a,g,v]),Object(r.useEffect)((function(){(Array.isArray(a)&&i>=a.length||!Array.isArray(a)&&i>0)&&u&&u(-1)}),[i,a]);var _="object"!==typeof s?s||"...":-1===p?s.text:"";return c(o.a.Fragment,null,_,s.options&&-1===p&&c(d,{dia:s,setOpt:h})||-1!==p&&c(f,{line:s.options[p].answer,idx:g,setOpt:h,ref:v}))}));function d(t){var e=t.dia,n=t.setOpt,r=[];return e.options.forEach((function(t,e){r.push(c("li",{className:s.a.dialogOption,onClick:function(t){return function(t,e){return"function"===typeof n&&n(t),e.preventDefault(),e.stopPropagation(),!1}(e,t)},key:e},t.question))})),(!e.options||e.options.length<1)&&(r=[c("li",null,"+ There was nothing to say")]),c("ol",null,r)}},zsrE:function(t,e,n){t.exports={dialogBox:"dialog_dialogBox__3i0kF",dialogOption:"dialog_dialogOption__3qL55"}}},[["YUBe",0,1,4,5,7,2,3,6,8,9,10]]]);