(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{KHVd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("q1tI"),a=n.n(r),o=n("ma3e"),c=n("5RVO"),u=n.n(c),s=a.a.createElement;function i(e){var t=Object(r.useState)(!1),n=t[0],a=t[1];return s("div",null,s("img",{src:n?e.src2:e.src||e.src2,onError:function(e){a(!0)},style:{filter:n?"brightness(50%)":""}}),n&&s("div",{style:{color:"red",width:"40px",height:"50px"},className:u.a.centerAbsolute},s(o.d,{size:"30px"}),s("div",null,"URL")))}},NhoZ:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var r=n("q1tI"),a=n.n(r),o=n("8Kt/"),c=n.n(o),u=n("NIcq"),s=n("q9vl"),i=n("40RG"),l=n("SKjy"),p=n("e6a3"),b=n("PmZg"),f=n("Srb5"),m=n("jxK0"),d=n("FCqg"),v=n("ma3e"),_=n("ecW4"),h=a.a.createElement;function g(e){return h(m.d,null,h(c.a,null,h("title",null,"Civil Discussion")),h(s.a,null,h(f.a,{style:{backgroundColor:"#181a1b",height:"100vh",width:"100vw"}},h(d.a,{title:"Users",rerenderFunc:function(){}},h(d.b,{icon:h(v.l,null),drawer:h(_.a,null)}),h(d.b,{icon:h(v.n,null)},h(l.a,null,h(l.b,{text:"Profile"}),h(l.b,{leftIcon:h(u.d,null),text:"Switch Acount"},h(i.b,null)),h(p.a,null),h(l.b,{leftIcon:h(u.c,null),text:"Account Settings"}))),h(d.b,{icon:h(u.c,null)},h(l.a,null,h(l.b,{text:"Dark Theme"}),h(l.b,{text:"Privacy Policy",link:"/discussion/privacy"})))),h(b.a,null,e.children))))}var O=n("vDqi"),y=n.n(O),j=n("v0uu");var w=n("avI8"),x=n.n(w),P=n("KHVd"),S=a.a.createElement;function F(e){var t=e.usr;return S("div",{className:x.a.userEntry},S("div",{className:x.a.pic},S(P.a,{src:t.avatarUrl,src2:"https://drkslv.herokuapp.com/assets/img/gnomed.png"})),S("div",{className:x.a.body},S("div",null,S("b",null,t.clearname||t.username)),S("div",null,S("i",{style:{color:"#888"}},"@",t.username)),S("div",null,S("pre",{style:{fontFamily:"inherit"}},t.description||"...")),S("div",null,S("i",{style:{color:"#888"}},"id: ",t.id))))}var E=n("o0o1"),N=n.n(E),k=n("rePB"),C=n("ODXe"),D=n("mgzo"),I=n.n(D),B=a.a.createElement;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){var t=Object(s.b)(),n=Object(C.a)(t,2),a=(n[0],n[1]),o=Object(r.useState)({}),c=o[0],u=o[1],i=Object(r.useState)({}),l=i[0],p=i[1],b=Object(r.useState)(!1),f=b[0],m=b[1];function d(){a.get("/user/me").then((function(e){u(e.data)})).catch()}function v(e){var t=e.target,n=t.name,r=t.value;p((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return t[n]=r,r||delete t[n],t}))}function _(e){p({}),e&&e.preventDefault()}return Object(r.useEffect)((function(){d()}),[]),B("form",{className:I.a.form,onSubmit:function(e){return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),m(!0),t.prev=2,t.next=5,N.a.awrap(a.put("/user/me",l));case 5:t.sent,m(!1),_(),d(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),m(!1);case 14:case"end":return t.stop()}}),null,null,[[2,11]],Promise)}},B("label",null," Username:",B("div",{style:{display:"flex"}},"@",B("input",{type:"text",style:{flexGrow:1},placeholder:c.username||"",onChange:v,value:l.username||"",name:"username",disabled:f}))),B("label",null," Clear Name:",B("input",{type:"text",name:"clearname",placeholder:c.clearname||c.username||"",onChange:v,value:l.clearname||"",disabled:f})),B("label",null," AvatarUrl:",B("input",{type:"text",name:"avatarUrl",placeholder:c.avatarUrl||"(none)",onChange:v,value:l.avatarUrl||"",disabled:f})),B("label",null,"Description:",B("textarea",{name:"description",placeholder:c.description||"(none)",rows:"4",autoComplete:"off",onChange:v,value:l.description||"",disabled:f})),B("button",{onClick:_,disabled:f},"Reset"),B("div",{className:I.a.submitButton,style:{zIndex:1}},B("button",{disabled:f},"Save Changes")))}var A=a.a.createElement;function q(){var e=function(){var e=Object(r.useState)([]),t=e[0],n=e[1];return Object(r.useEffect)((function(){y.a.get(j.a+"/user").then((function(e){n(e.data)})).catch()}),[]),t}().map((function(e){return A(F,{key:e.id,usr:e})}));return A("div",{className:x.a.userList},A(U,null),e)}var W=a.a.createElement;function T(){return W(g,null,W(q,null))}},O1IP:function(e,t,n){e.exports={form:"postForm_form__Oczvn",postForm:"postForm_postForm__eQJ-A",registerForm:"postForm_registerForm__1bmo3",accountFormWrap:"postForm_accountFormWrap__138CC",usernameHighlight:"postForm_usernameHighlight__OITtg",removeButton:"postForm_removeButton__5_hKK",clicked:"postForm_clicked__2ebhs",accountFormsAlign:"postForm_accountFormsAlign__2EQp5",tabWrapper:"postForm_tabWrapper__2wp4y",tabBar:"postForm_tabBar__2RJae",tab:"postForm_tab__1A3gY",submitButton:"postForm_submitButton__WO9kK",postButton:"postForm_postButton__1GP0x",jumping:"postForm_jumping__3WKtO",rotating:"postForm_rotating__1YuS7",title:"postForm_title__3evoo",titleCounter:"postForm_titleCounter__QnXSx",author:"postForm_author__31Fn5"}},Srb5:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n("q1tI"),a=n.n(r),o=n("SKjy"),c=n("hKBk"),u=n.n(c),s=n("B68i"),i=a.a.createElement,l=Object(r.createContext)({});function p(e){var t=Object(r.useState)(!1),n=t[0],c=t[1],p=Object(r.useState)([0,0]),b=p[0],f=p[1],m=Object(r.useState)([i(o.b,{text:"Dark Theme"}),i("hr",null),i(o.b,{text:"Privacy Policy"})]),d=m[0],v=m[1],_={left:b[0],top:b[1],display:n?"block":"none"};function h(){c(!1)}var g=d.map((function(e,t){return a.a.cloneElement(e,{key:t})}));return i("div",{style:e.style},i(l.Provider,{value:{openMenu:function(e,t,n){n&&(c(!0),f([e,t]),v(n))},removeMenu:h}},e.children),i(s.a,{className:u.a.menuMover,component:"div",onClickOutside:function(){h()},style:_},n&&i(o.a,{small:!0},g)))}},avI8:function(e,t,n){e.exports={card:"user_card__2Pwp6",animCard:"user_animCard__1oUa4",userEntry:"user_userEntry__31hYl",cardEntrance:"user_cardEntrance__2Fw8p",entering:"user_entering__3d-WM",cardboardEntrance:"user_cardboardEntrance__2iqQN",list:"user_list__XXgoi",userList:"user_userList__331PA",fabulous:"user_fabulous__1OLfa",scroll:"user_scroll__2umiC",centerAbsolute:"user_centerAbsolute__MRNfp",body:"user_body__2smAV",pic:"user_pic__1h_F-"}},e6a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("o0o1"),a=n.n(r),o=n("rePB"),c=n("ODXe"),u=n("q1tI"),s=n.n(u),i=n("SKjy"),l=n("ma3e"),p=n("q9vl"),b=n("v0uu"),f=s.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=Object(p.b)(),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(u.useState)({}),m=o[0],v=o[1],h=n.users[n.active],g=Object(u.useState)(!1);g[0],g[1];Object(u.useEffect)((function(){v(JSON.parse(localStorage.getItem("notifications")||"{}"))}),[]);var O=!!h&&!!m[h.username],y=O?"ON":"OFF";return h||(y="PLS LOG IN"),"undefined"!==typeof Notification&&"denied"===Notification.permission&&(O=!1,y="DENIED"),("undefined"===typeof navigator||!1 in navigator)&&(O=!1,y="UNSUPPORTED"),f(i.b,{onClick:function(){var e,t,o,c,u,s,i;return a.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=n.users[n.active],!(!1 in navigator)&&e){l.next=3;break}return l.abrupt("return");case 3:return t=m[e.username],l.next=6,a.a.awrap(navigator.serviceWorker.ready);case 6:return o=l.sent,l.next=9,a.a.awrap(o.pushManager.getSubscription());case 9:if(c=l.sent){l.next=26;break}return l.next=13,a.a.awrap(fetch(b.a+"/notifier/pushSubscriptionKey"));case 13:return u=l.sent,l.next=16,a.a.awrap(u.json());case 16:return s=l.sent,i=_(s.public),l.prev=18,l.next=21,a.a.awrap(o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i}));case 21:c=l.sent,l.next=26;break;case 24:l.prev=24,l.t0=l.catch(18);case 26:return l.prev=26,l.next=29,a.a.awrap(r.post("/notifier/".concat(t?"un":"","subscribe"),d({},c.toJSON()),{params:{usersub:!0}}));case 29:v((function(n){var r=d({},n);return r[e.username]=!t,localStorage.setItem("notifications",JSON.stringify(r)),r})),l.next=34;break;case 32:l.prev=32,l.t1=l.catch(26);case 34:case"end":return l.stop()}}),null,null,[[18,24],[26,32]],Promise)},leftIcon:f(l.c,null),text:f(s.a.Fragment,null,"Notifications: ",f("span",{style:{color:O?"lime":"red"}},y))})}function _(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}},ecW4:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("o0o1"),a=n.n(r),o=n("ODXe"),c=n("q1tI"),u=n.n(c),s=n("q9vl"),i=n("O1IP"),l=n.n(i),p=u.a.createElement;function b(e){var t=Object(s.b)(),n=Object(o.a)(t,2),r=n[0],i=n[1],b=r.users[r.active],m=Object(c.useState)(e.title||""),d=m[0],v=m[1],_=Object(c.useState)(e.text||""),h=_[0],g=_[1],O=Object(c.useState)(!1),y=O[0],j=O[1],w=Object(c.useState)(!1),x=w[0],P=w[1],S=Object(c.useState)(!1),F=S[0],E=S[1],N=Object(c.useRef)();function k(e){switch(e.target.name){case"title":return v(e.target.value);case"text":return E(N.current.scrollHeight),g(e.target.value)}}return console.log(y),Object(c.useEffect)((function(){N&&N.current&&E(N.current.scrollHeight)}),[N]),p(u.a.Fragment,null,p("form",{onSubmit:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),j(!0),n.next=4,a.a.awrap(f(1e3));case 4:if(console.log("Title:",d),console.log("Text:",h),!e.edit){n.next=13;break}return n.next=9,a.a.awrap(e.onEdit(h));case 9:return n.sent||P(!0),j(!1),n.abrupt("return");case 13:d.length>=1&&d.length<=150?i.post("/post/",{title:d,text:h}).then((function(t){e.close(),e.rerender(t.data.entityId),j(!1)})).catch((function(t){console.log(t),e.rerender(),j(!1)})):(j(!1),e.rerender(),e.close());case 14:case"end":return n.stop()}}),null,null,null,Promise)},className:l.a.postForm},p("div",{className:l.a.titleCounter,"data-invalid":d.length<1||d.length>150},p("input",{type:"text",className:l.a.title,value:d,onChange:k,name:"title",placeholder:"The post's title",autoComplete:"off",disabled:y||e.edit}),p("p",null,d.length,"/150")),p("textarea",{name:"text",value:h,onChange:k,placeholder:"Go ahead, unleash your creative Genius!",rows:"4",autoComplete:"off",disabled:y,ref:N,style:{height:F+3+"px"}}),p("div",{className:l.a.postButton},p("button",{type:"submit",value:"Post!","data-known":!Boolean(b),disabled:y},"Post!")),e.edit&&p("button",{value:"Cancel",disabled:y,onClick:function(){e.onEdit(null,!0)}},"Cancel"),p("div",{className:l.a.author},"as",p("span",{"data-known":Boolean(b)},b?b.username:"<UNKNOWN>"),x&&p("i",{style:{color:"red",marginLeft:"2em"}},"(an error occured)"))))}function f(e){return new Promise((function(t){setTimeout(t,e)}))}},hFU0:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return n("NhoZ")}])}},[["hFU0",0,1,2,4,6,3,5,7,9]]]);