(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var r=n("o0o1"),a=n.n(r),c=n("q1tI"),i=n.n(c),o=n("8Kt/"),s=n.n(o),u=n("FCqg"),l=n("SKjy"),f=n("PmZg"),p=n("gbgE"),b=n("40RG"),v=(n("ODXe"),n("SQ9z"),n("UL8Z"),n("AeZb"),n("Cu94"),n("q9vl"));i.a.createElement;var g=n("ecW4"),d=n("NIcq"),O=n("ma3e"),w=n("Srb5"),h=n("jxK0"),y=n("e6a3"),m=i.a.createElement;function j(){var e=Object(c.useState)(Math.random()),t=e[0],n=e[1];function r(e){if(console.log("rerender"),e)return n(e);n(Math.random())}return Object(c.useEffect)((function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/discussion/serviceworker.js").then((function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("registered -> ",e),navigator.serviceWorker.addEventListener("message",(function(e){}));case 2:case"end":return t.stop()}}),null,null,null,Promise)})).catch((function(e){console.log("error -> ",e)}))}),[]),m(h.d,null,m(s.a,null,m("title",null,"Civil Discussion")),m(v.a,null,m(w.a,{style:{backgroundColor:"#181a1b",height:"100vh",width:"100vw"}},m(u.a,{title:"Discussion",rerenderFunc:r},m(u.b,{icon:m(O.m,null),drawer:m(g.a,null)}),m(u.b,{icon:m(O.p,null)},m(l.a,null,m(l.b,{text:"Profile"}),m(l.b,{leftIcon:m(d.d,null),text:"Switch Acount"},m(b.b,null)),m(y.a,null),m(l.b,{leftIcon:m(d.c,null),text:"Account Settings"}))),m(u.b,{icon:m(d.c,null)},m(l.a,null,m(l.b,{text:"Dark Theme"}),m(l.b,{text:"Privacy Policy",link:"/discussion/privacy"})))),m(f.a,null,m(p.a,{rerender:t,rerenderFunc:r})))))}},e6a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("o0o1"),a=n.n(r),c=n("rePB"),i=n("ODXe"),o=n("q1tI"),s=n.n(o),u=n("SKjy"),l=n("ma3e"),f=n("q9vl"),p=n("v0uu"),b=s.a.createElement;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){var e=Object(f.b)(),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)({}),v=c[0],d=c[1],w=n.users[n.active],h=Object(o.useState)(!1);h[0],h[1];Object(o.useEffect)((function(){d(JSON.parse(localStorage.getItem("notifications")||"{}"))}),[]);var y=!!w&&!!v[w.username],m=y?"ON":"OFF";return w||(m="PLS LOG IN"),"undefined"!==typeof Notification&&"denied"===Notification.permission&&(y=!1,m="DENIED"),("undefined"===typeof navigator||!1 in navigator)&&(y=!1,m="UNSUPPORTED"),b(u.b,{onClick:function(){var e,t,c,i,o,s,u;return a.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=n.users[n.active],!(!1 in navigator)&&e){l.next=3;break}return l.abrupt("return");case 3:return t=v[e.username],l.next=6,a.a.awrap(navigator.serviceWorker.ready);case 6:return c=l.sent,l.next=9,a.a.awrap(c.pushManager.getSubscription());case 9:if(i=l.sent){l.next=26;break}return l.next=13,a.a.awrap(fetch(p.a+"/notifier/pushSubscriptionKey"));case 13:return o=l.sent,l.next=16,a.a.awrap(o.json());case 16:return s=l.sent,u=O(s.public),l.prev=18,l.next=21,a.a.awrap(c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u}));case 21:i=l.sent,l.next=26;break;case 24:l.prev=24,l.t0=l.catch(18);case 26:return l.prev=26,l.next=29,a.a.awrap(r.post("/notifier/".concat(t?"un":"","subscribe"),g({},i.toJSON()),{params:{usersub:!0}}));case 29:d((function(n){var r=g({},n);return r[e.username]=!t,localStorage.setItem("notifications",JSON.stringify(r)),r})),l.next=34;break;case 32:l.prev=32,l.t1=l.catch(26);case 34:case"end":return l.stop()}}),null,null,[[18,24],[26,32]],Promise)},leftIcon:b(l.c,null),text:b(s.a.Fragment,null,"Notifications: ",b("span",{style:{color:y?"lime":"red"}},m))})}function O(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}},"m0L+":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["m0L+",0,1,4,5,7,12,13,2,3,6,8,10,9,11,14,15]]]);