(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{RNiq:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return j}));var r=t("o0o1"),a=t.n(r),c=t("q1tI"),i=t.n(c),o=t("8Kt/"),s=t.n(o),u=t("FCqg"),l=t("SKjy"),f=t("PmZg"),b=t("gbgE"),p=t("40RG"),v=(t("ODXe"),t("SQ9z"),t("UL8Z"),t("AeZb"),t("Cu94"),t("q9vl"));i.a.createElement;var g=t("ecW4"),d=t("NIcq"),O=t("ma3e"),w=t("Srb5"),h=t("jxK0"),y=t("e6a3"),m=i.a.createElement;function j(){var e=Object(c.useState)(Math.random()),n=e[0],t=e[1];function r(e){if(console.log("rerender"),e)return t(e);t(Math.random())}return Object(c.useEffect)((function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/discussion/serviceworker.js").then((function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("registered -> ",e),navigator.serviceWorker.addEventListener("message",(function(e){}));case 2:case"end":return n.stop()}}),null,null,null,Promise)})).catch((function(e){console.log("error -> ",e)}))}),[]),m(h.d,null,m(s.a,null,m("title",null,"Civil Discussion")),m(v.a,null,m(w.a,{style:{backgroundColor:"#181a1b",height:"100vh",width:"100vw"}},m(u.a,{title:"Discussion",rerenderFunc:r},m(u.b,{icon:m(O.l,null),drawer:m(g.a,null)}),m(u.b,{icon:m(O.n,null)},m(l.a,null,m(l.b,{text:"Profile"}),m(l.b,{leftIcon:m(d.d,null),text:"Switch Acount"},m(p.b,null)),m(y.a,null),m(l.b,{leftIcon:m(d.c,null),text:"Account Settings"}))),m(u.b,{icon:m(d.c,null)},m(l.a,null,m(l.b,{text:"Dark Theme"}),m(l.b,{text:"Privacy Policy",link:"/discussion/privacy"})))),m(f.a,null,m(b.a,{rerender:n,rerenderFunc:r})))))}},e6a3:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var r=t("o0o1"),a=t.n(r),c=t("rePB"),i=t("ODXe"),o=t("q1tI"),s=t.n(o),u=t("SKjy"),l=t("ma3e"),f=t("q9vl"),b=t("v0uu"),p=s.a.createElement;function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){Object(c.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(){var e=Object(f.b)(),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)({}),v=c[0],d=c[1],w=t.users[t.active],h=Object(o.useState)(!1);h[0],h[1];Object(o.useEffect)((function(){d(JSON.parse(localStorage.getItem("notifications")||"{}"))}),[]);var y=!!w&&!!v[w.username],m=y?"ON":"OFF";return w||(m="PLS LOG IN"),"undefined"!==typeof Notification&&"denied"===Notification.permission&&(y=!1,m="DENIED"),("undefined"===typeof navigator||!1 in navigator)&&(y=!1,m="UNSUPPORTED"),p(u.b,{onClick:function(){var e,n,c,i,o,s,u;return a.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=t.users[t.active],!(!1 in navigator)&&e){l.next=3;break}return l.abrupt("return");case 3:return n=v[e.username],l.next=6,a.a.awrap(navigator.serviceWorker.ready);case 6:return c=l.sent,l.next=9,a.a.awrap(c.pushManager.getSubscription());case 9:if(i=l.sent){l.next=26;break}return l.next=13,a.a.awrap(fetch(b.a+"/notifier/pushSubscriptionKey"));case 13:return o=l.sent,l.next=16,a.a.awrap(o.json());case 16:return s=l.sent,u=O(s.public),l.prev=18,l.next=21,a.a.awrap(c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u}));case 21:i=l.sent,l.next=26;break;case 24:l.prev=24,l.t0=l.catch(18);case 26:return l.prev=26,l.next=29,a.a.awrap(r.post("/notifier/".concat(n?"un":"","subscribe"),g({},i.toJSON()),{params:{usersub:!0}}));case 29:d((function(t){var r=g({},t);return r[e.username]=!n,localStorage.setItem("notifications",JSON.stringify(r)),r})),l.next=34;break;case 32:l.prev=32,l.t1=l.catch(26);case 34:case"end":return l.stop()}}),null,null,[[18,24],[26,32]],Promise)},leftIcon:p(l.c,null),text:p(s.a.Fragment,null,"Notifications: ",p("span",{style:{color:y?"lime":"red"}},m))})}function O(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(n),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}},"m0L+":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t("RNiq")}])}},[["m0L+",0,1,5,6,7,12,15,2,3,4,8,9,10,11,13,14]]]);