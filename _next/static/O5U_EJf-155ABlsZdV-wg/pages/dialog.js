(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"/sRa":function(e){e.exports=JSON.parse('{"options":[{"condition":true,"question":"Who are you?","answer":"I am the Weatherman. "},{"condition":true,"question":"Where are we?","answer":"I don\'t know."},{"condition":true,"question":"How\'s the weather??","answer":["Hmpf.","It\'s storming outside. STORMING! The audacity!","damn, i HATE my job."]},{"condition":true,"question":"TEST","answer":{"text":"YES TEST WORKING IDIOT","effect":"yitter","stayInOptions":false,"options":[{"condition":true,"question":"NICE","answer":["IKR!!",{"text":"We could be friends!","options":[{"question":"ACCEPT","answer":"YeSS! We\'re besties !!! :)"},{"question":"DECLINE","answer":"just joking"}]}]},{"condition":true,"question":"WOW FUCK YOU","answer":"bruh fuck urself >:("}]}},{"condition":true,"question":"How are you??","answer":[]}]}')},"80PL":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("q1tI"),o=n.n(r),a=n("8Kt/"),i=n.n(a),s=n("NIcq"),u=n("q9vl"),c=n("40RG"),l=n("SKjy"),p=n("e6a3"),f=n("PmZg"),d=n("Srb5"),b=n("jxK0"),m=n("FCqg"),g=n("ma3e"),O=n("ecW4"),h=o.a.createElement;function v(e){return h(b.d,null,h(i.a,null,h("title",null,"Civil Discussion")),h(u.a,null,h(d.a,{style:{backgroundColor:"#181a1b",height:"100vh",width:"100vw"}},h(m.a,{title:e.title,rerenderFunc:function(){}},h(m.b,{icon:h(g.n,null),drawer:h(O.a,null)}),h(m.b,{icon:h(g.q,null)},h(l.a,null,h(l.b,{text:"Profile"}),h(l.b,{leftIcon:h(s.d,null),text:"Switch Acount"},h(c.b,null)),h(p.a,null),h(l.b,{leftIcon:h(s.c,null),text:"Account Settings"}))),h(m.b,{icon:h(s.c,null)},h(l.a,null,h(l.b,{text:"Dark Theme"}),h(l.b,{text:"Privacy Policy",link:"/discussion/privacy"})))),h(f.a,null,e.children))))}},O1IP:function(e,t,n){e.exports={form:"postForm_form__Oczvn",postForm:"postForm_postForm__eQJ-A",registerForm:"postForm_registerForm__1bmo3",baseButton:"postForm_baseButton__3FQfE",accountFormWrap:"postForm_accountFormWrap__138CC",usernameHighlight:"postForm_usernameHighlight__OITtg",removeButton:"postForm_removeButton__5_hKK",clicked:"postForm_clicked__2ebhs",accountFormsAlign:"postForm_accountFormsAlign__2EQp5",tabWrapper:"postForm_tabWrapper__2wp4y",tabBar:"postForm_tabBar__2RJae",tab:"postForm_tab__1A3gY",submitButton:"postForm_submitButton__WO9kK",postButton:"postForm_postButton__1GP0x",destructiveButton:"postForm_destructiveButton__10KJ-",jumping:"postForm_jumping__3WKtO",rotating:"postForm_rotating__1YuS7",title:"postForm_title__3evoo",titleCounter:"postForm_titleCounter__QnXSx",author:"postForm_author__31Fn5"}},Srb5:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n("q1tI"),o=n.n(r),a=n("SKjy"),i=n("hKBk"),s=n.n(i),u=n("B68i"),c=o.a.createElement,l=Object(r.createContext)({});function p(e){var t=Object(r.useState)(!1),n=t[0],i=t[1],p=Object(r.useState)([0,0]),f=p[0],d=p[1],b=Object(r.useState)([c(a.b,{text:"Dark Theme"}),c("hr",null),c(a.b,{text:"Privacy Policy"})]),m=b[0],g=b[1];if(n)var O={left:"min( calc( 100vw - 205px ),   "+f[0]+"px  )",top:"min( calc( 100vh + "+document.body.scrollHeight+"px - 205px ),   "+f[1]+"px  )",display:n?"block":"none"};function h(){i(!1)}var v=m.map((function(e,t){return o.a.cloneElement(e,{key:t})}));return c("div",{style:e.style},c(l.Provider,{value:{openMenu:function(e,t,n){n&&(i(!0),d([e,t]),g(n))},removeMenu:h}},e.children),c(u.a,{className:s.a.menuMover,component:"div",onClickOutside:function(){h()},style:O},n&&c(a.a,{small:!0},v)))}},YUBe:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dialog",function(){return n("lBlV")}])},e6a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("o0o1"),o=n.n(r),a=n("rePB"),i=n("ODXe"),s=n("q1tI"),u=n.n(s),c=n("SKjy"),l=n("ma3e"),p=n("q9vl"),f=n("v0uu"),d=u.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){var e=Object(p.b)(),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)({}),b=a[0],g=a[1],h=n.users[n.active],v=Object(s.useState)(!1);v[0],v[1];Object(s.useEffect)((function(){g(JSON.parse(localStorage.getItem("notifications")||"{}"))}),[]);var _=!!h&&!!b[h.username],y=_?"ON":"OFF";return h||(y="PLS LOG IN"),"undefined"!==typeof Notification&&"denied"===Notification.permission&&(_=!1,y="DENIED"),("undefined"===typeof navigator||!1 in navigator)&&(_=!1,y="UNSUPPORTED"),d(c.b,{onClick:function(){var e,t,a,i,s,u,c;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=n.users[n.active],!(!1 in navigator)&&e){l.next=3;break}return l.abrupt("return");case 3:return t=b[e.username],l.next=6,o.a.awrap(navigator.serviceWorker.ready);case 6:return a=l.sent,l.next=9,o.a.awrap(a.pushManager.getSubscription());case 9:if(i=l.sent){l.next=26;break}return l.next=13,o.a.awrap(fetch(f.a+"/notifier/pushSubscriptionKey"));case 13:return s=l.sent,l.next=16,o.a.awrap(s.json());case 16:return u=l.sent,c=O(u.public),l.prev=18,l.next=21,o.a.awrap(a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c}));case 21:i=l.sent,l.next=26;break;case 24:l.prev=24,l.t0=l.catch(18);case 26:return l.prev=26,l.next=29,o.a.awrap(r.post("/notifier/".concat(t?"un":"","subscribe"),m({},i.toJSON()),{params:{usersub:!0}}));case 29:g((function(n){var r=m({},n);return r[e.username]=!t,localStorage.setItem("notifications",JSON.stringify(r)),r})),l.next=34;break;case 32:l.prev=32,l.t1=l.catch(26);case 34:case"end":return l.stop()}}),null,null,[[18,24],[26,32]],Promise)},leftIcon:d(l.c,null),text:d(u.a.Fragment,null,"Notifications: ",d("span",{style:{color:_?"lime":"red"}},y))})}function O(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}},ecW4:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("o0o1"),o=n.n(r),a=n("ODXe"),i=n("q1tI"),s=n.n(i),u=n("q9vl"),c=n("O1IP"),l=n.n(c),p=n("cDhZ"),f=s.a.createElement;Object(p.a)({anchor:!1,embeds:!0,supressHeadings:!0});function d(e){var t=Object(u.b)(),n=Object(a.a)(t,2),r=n[0],c=n[1],p=r.users[r.active],d=Object(i.useState)(e.title||""),m=d[0],g=d[1],O=Object(i.useState)(e.text||""),h=O[0],v=O[1],_=Object(i.useState)(!1),y=_[0],w=_[1],x=Object(i.useState)(!1),j=x[0],S=x[1],F=Object(i.useState)(!1),k=F[0],P=F[1],E=Object(i.useRef)();function I(e){switch(e.target.name){case"title":return g(e.target.value);case"text":return P(E.current.scrollHeight),v(e.target.value)}}return console.log(y),Object(i.useEffect)((function(){E&&E.current&&P(E.current.scrollHeight)}),[E]),f(s.a.Fragment,null,f("form",{onSubmit:function(t){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),w(!0),n.next=4,o.a.awrap(b(1e3));case 4:if(console.log("Title:",m),console.log("Text:",h),!e.edit){n.next=13;break}return n.next=9,o.a.awrap(e.onEdit(h));case 9:return n.sent||S(!0),w(!1),n.abrupt("return");case 13:m.length>=1&&m.length<=150?c.post("/post/",{title:m,text:h}).then((function(t){e.close(),e.rerender(t.data.entityId),w(!1)})).catch((function(t){console.log(t),e.rerender(),w(!1)})):(w(!1),e.rerender(),e.close());case 14:case"end":return n.stop()}}),null,null,null,Promise)},className:l.a.postForm},f("div",{className:l.a.titleCounter,"data-invalid":m.length<1||m.length>150},f("input",{type:"text",className:l.a.title,value:m,onChange:I,name:"title",placeholder:"The post's title",autoComplete:"off",disabled:y||e.edit}),f("p",null,m.length,"/150")),f("textarea",{name:"text",value:h,onChange:I,placeholder:"Go ahead, unleash your creative Genius!",rows:"4",autoComplete:"off",disabled:y,ref:E,style:{height:k+3+"px"}}),f("div",{className:l.a.postButton},f("button",{type:"submit",value:"Post!","data-known":!Boolean(p),disabled:y},"Post!")),e.edit&&f("button",{value:"Cancel",disabled:y,onClick:function(){e.onEdit(null,!0)}},"Cancel"),f("div",{className:l.a.author},"as",f("span",{"data-known":Boolean(p)},p?p.username:"<UNKNOWN>"),j&&f("i",{style:{color:"red",marginLeft:"2em"}},"(an error occured)"))))}function b(e){return new Promise((function(t){setTimeout(t,e)}))}},lBlV:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("q1tI"),o=n.n(r),a=n("80PL"),i=n("/sRa"),s=n("zsrE"),u=n.n(s),c=o.a.createElement;function l(){return console.log(i),c(a.a,{title:"Dialog test"},c(p,{dialog:i}))}function p(e){var t=e.dialog,n=Object(r.useState)(-1),o=n[0],a=n[1],i=Object(r.useState)(0),s=i[0],l=i[1],p=Object(r.useRef)();function b(e){console.log("key down"),p.current&&!0!==p.current.keyDwn()||l((function(e){return-1===o?e:e+1}))}function m(e){a(e),l(0)}return c("div",{className:u.a.dialogBox,onKeyDown:b,onClick:b,tabIndex:"0"},-1===o?c(d,{dia:t,setOpt:m}):"",-1!==o?c(f,{line:t.options[o].answer,idx:s,setOpt:m,ref:p}):"")}var f=Object(r.forwardRef)((function(e,t){var n=e.line,a=void 0===n?"...":n,i=e.idx,s=e.setOpt,u=null,l=Object(r.useState)(-1),p=l[0],b=l[1],m=Object(r.useState)(0),g=m[0],O=m[1],h=Object(r.useRef)();function v(e){b(e),O(0)}Array.isArray(a)?(a.length<1&&(a=["..."]),u=a[Math.min(i,a.length-1)]):u=a,Object(r.useImperativeHandle)(t,(function(){return{keyDwn:function(){if(!h.current||!0===h.current.keyDwn()){if(u.options){if(!u.stayInOptions&&-1!==p){var e=u.options[p].answer;if(g>=(Array.isArray(e)?e.length-1:0))return!0}return O((function(e){return-1===p?e:e+1})),!1}return!0}}}}),[u,p,a,g,h]),Object(r.useEffect)((function(){(Array.isArray(a)&&i>=a.length||!Array.isArray(a)&&i>0)&&s&&s(-1)}),[i,a]);var _="object"!==typeof u?u||"...":-1===p?u.text:"";return c(o.a.Fragment,null,_,u.options&&-1===p&&c(d,{dia:u,setOpt:v})||-1!==p&&c(f,{line:u.options[p].answer,idx:g,setOpt:v,ref:h}))}));function d(e){var t=e.dia,n=e.setOpt,r=[];return t.options.forEach((function(e,t){r.push(c("li",{className:u.a.dialogOption,onClick:function(e){return function(e,t){return"function"===typeof n&&n(e),t.preventDefault(),t.stopPropagation(),!1}(t,e)},key:t},e.question))})),(!t.options||t.options.length<1)&&(r=[c("li",null,"+ There was nothing to say")]),c("ol",null,r)}},zsrE:function(e,t,n){e.exports={dialogBox:"dialog_dialogBox__3i0kF",dialogOption:"dialog_dialogOption__3qL55"}}},[["YUBe",0,1,4,5,7,2,3,6,8,9,10,11]]]);