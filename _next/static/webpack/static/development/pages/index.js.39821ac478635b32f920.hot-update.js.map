{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.39821ac478635b32f920.hot-update.js","sources":["webpack:///./hooks/posts.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { apiUrl } from \"../constants\";\r\nimport { useIdentity } from \"./identity\";\r\n\r\nvar emptyObj = {};\r\nvar currentConfig = {};\r\n\r\n\r\nexport function usePostIds(rerender, config=emptyObj) {\r\n    var [posts, setPosts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        Axios.get(apiUrl+`/post?deleted=${config.del || \"exclude\"}&limit=${config.lim || 10}&offset=${config.off || 0}&order=${config.order ||\"time\"}&orderDir=${config.oDir ||\"DESC\"}`)\r\n        .then((res) => {\r\n            setPosts(res.data);\r\n        })\r\n        .catch();\r\n    }, [rerender, config]) \r\n\r\n    return [posts]\r\n}\r\n\r\nexport function usePosts(ids) {\r\n    var [postArray, setPostArray] = useState([]);\r\n    var [id, axios] = useIdentity();\r\n    var [prev, setPrev] = useState(-1);\r\n    console.log(ids);\r\n    console.log(\"ACTIVE_> \",id.active);\r\n\r\n    useEffect(() => {\r\n        if(id.active===prev)\r\n            return;\r\n\r\n        setPrev(id.active);\r\n        var ax = Axios;\r\n        if(id.users[id.active])\r\n            ax=axios;\r\n\r\n        var promises = ids.map((id) => {\r\n            //FEtch\r\n            return ax.get(apiUrl+\"/post/\"+id)\r\n        })\r\n        Promise.all(promises)\r\n        .then((e) => {\r\n\r\n            setPostArray(e.map((res)=>res.data));\r\n\r\n        })\r\n        .catch((e) => {\r\n            console.log(e);\r\n            setPostArray([\"ohjemine\"])\r\n        });             \r\n    }, [ids, id, axios]) \r\n\r\n    //console.log(configChange);\r\n    console.log(postArray);\r\n    return postArray\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;A","sourceRoot":""}