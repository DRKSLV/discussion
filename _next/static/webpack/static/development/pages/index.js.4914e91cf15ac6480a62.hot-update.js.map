{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.4914e91cf15ac6480a62.hot-update.js","sources":["webpack:///./components/Post.js"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\r\n\r\nimport CommentIcon from \"../res/svg/commentIcon.svg\"\r\nimport { Vote } from \"./Vote\";\r\nimport { Timestamp } from \"./Timestamp\"\r\n\r\nimport s from \"../style/post.module.sass\";\r\n\r\nimport { CommentSection } from \"./CommentSection\";\r\n\r\n//markdown styling\r\nimport mdStyle from \"../style/document.module.sass\";\r\nimport markdown from \"../helpers/markdown\";\r\nconst md = markdown({anchor: false, embeds: true, supressHeadings: true});\r\n\r\nexport function Post(props) {\r\n    var p = props.post;\r\n    var [commentsOpen, setCommentsOpen] = useState(false);\r\n    var [collapsed, setCollapsed] = useState(false);\r\n\r\n    const bodyRef = useRef();\r\n    //console.log(bodyRef.current.clientHeight);\r\n    \r\n    useEffect(() => {\r\n        setCollapsed(!commentsOpen && bodyRef.current.clientHeight>350);\r\n    }, [bodyRef, commentsOpen])\r\n\r\n    var expandTime;\r\n    if(bodyRef.current) {\r\n        expandTime = 0.71428571429 * bodyRef.current.clientHeight-350;\r\n    }\r\n\r\n    return (\r\n        <div className={s.postWrapper}>\r\n            <div className={s.post} onClick={()=>setCommentsOpen(!commentsOpen)} data-expanded={commentsOpen}>\r\n                <Vote up={p.entity.upvotes} down={p.entity.downvotes} id={p.entity.id}></Vote>\r\n                <div className={s.content}>\r\n                    <div>\r\n                        <div className={s.comments}>\r\n                            {(p.entity.comment.rgt-p.entity.comment.lft-1)/2}\r\n                            <CommentIcon/>\r\n                        </div>\r\n                        <p className={s.title}>\r\n                            <b>{p.title}</b><br/>\r\n                            <span className={s.author}>posted by {p.author ? p.author.username : \"❌DELETED❌\"}</span>\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className={s.body} style={{maxHeight: !commentsOpen ? \"350px\" : bodyRef.current.clientHeight+10, \"--expandtime\": expandTime+\"ms\", overflow:\"hidden\"}}>\r\n                        <div dangerouslySetInnerHTML={{__html: md(p.text)}} className={mdStyle.mdPost} ref={bodyRef}></div>\r\n                        {collapsed && <div className={s.expandDialog}>Click to Expand</div>}\r\n                    </div>\r\n                    \r\n                    <Timestamp time={p.createdAt} edit={p.updatedAt}></Timestamp>\r\n                </div>\r\n            </div>\r\n            <CommentSection id={p.entity.id} open={commentsOpen} key={\"cs\"+p.entity.id}/>\r\n        </div>\r\n    );\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;A","sourceRoot":""}